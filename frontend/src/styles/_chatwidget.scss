.chat-popup-container {
   .chat-button {
      position: fixed;
      bottom: 50px;
      right: 50px;
      padding: 16px;
      height: 60px;
      width: 60px;
      border-radius: 50%;
      border: none;
      background-color: #5e70f5;
      color: white;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      transition: background 0.3s, transform 0.2s;

      img.chat-1 {
         display: none;
         height: 40px;
      }

      img.chat-2 {
         display: block;
         height: 40px;
      }

      &:hover {
         background-color: #fff;
         transform: scale(1.05);

         img.chat-2 {
            display: none;
         }

         img.chat-1 {
            display: block;
         }
      }


   }

   .chat-popup {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #f7f8fa;
      border-radius: 16px;
      height: 520px;
      width: 480px;
      display: flex;
      flex-direction: column;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      overflow: hidden;
      transition: all 0.3s ease-in-out;
      z-index: 1000;

      @media (max-width: 576px) {
         width: 100%;
         height: 100%;
         bottom: 0;
         right: 0;
         border-radius: 0;
      }

      .chat-header {
         background-color: #152183;
         color: white;
         padding: 12px 16px;
         display: flex;
         justify-content: space-between;
         align-items: center;

         .history-and-newchat {
            display: flex;
            gap: 8px;

            button {
               background: none;
               color: white;
               border-radius: 50%;
               border: none;
               width: 36px;
               height: 36px;
               display: flex;
               align-items: center;
               justify-content: center;
               transition: background 0.3s;

               &:hover {
                  background-color: #e0e0e0;
                  color: #152183;
               }
            }
         }

         h2 {
            font-size: 16px;
            font-weight: 600;
            margin: 0;
         }

         .close-btn {
            button {
               background: none;
               border: none;
               color: white;
               font-size: 18px;
               width: 36px;
               height: 36px;
               border-radius: 50%;

               &:hover {
                  background-color: #e0e0e0;
                  color: #152183;
               }

            }
         }
      }

      .chat-body {
         flex: 1;
         padding: 16px;
         overflow-y: auto;

         .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 10px 5px;
            scroll-behavior: smooth;
            background: #f7f8fa;



            .message {
               display: flex;
               margin-bottom: 12px;

               &.user {
                  justify-content: flex-end;

                  .bubble {
                     background: #152183;
                     color: #fff;
                     border-radius: 16px 16px 0 16px;
                  }
               }

               &.bot {
                  justify-content: flex-start;

                  .bubble {
                     background: #fff;
                     border: 1px solid #e5e7eb;
                     color: #333;
                     border-radius: 16px 16px 16px 0;

                     a {
                        color: #152183;
                        text-decoration: underline;
                     }

                     strong {
                        color: #152183;
                     }

                     code {
                        background: #f4f4f4;
                        padding: 2px 6px;
                        border-radius: 4px;
                        font-size: 0.9em;
                     }
                  }
               }

               .bubble {
                  padding: 10px 14px;
                  max-width: 90%;
                  line-height: 1.5;
                  font-size: 0.95rem;
                  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
               }
            }

            .typing {
               font-style: italic;
               color: gray;
               padding: 0 5px;
            }

            .typing-indicator {
               .dots {
                  display: flex;
                  align-items: center;
                  gap: 4px;

                  .dot {
                     width: 6px;
                     height: 6px;
                     background-color: #999;
                     border-radius: 50%;
                     animation: blink 1.4s infinite both;

                     &:nth-child(2) {
                        animation-delay: 0.2s;
                     }

                     &:nth-child(3) {
                        animation-delay: 0.4s;
                     }
                  }
               }
            }





            @keyframes blink {

               0%,
               80%,
               100% {
                  opacity: 0;
               }

               40% {
                  opacity: 1;
               }
            }
         }

         .form-container {
            position: sticky;
            bottom: 0;
            // background: #fff;
            padding: 12px 5px;
            // border-top: 1px solid #e5e7eb;
            z-index: 10;

            .inputgroup {
               position: relative;
               display: flex;
               align-items: flex-end;

               textarea {
                  width: 100%;
                  min-height: 44px;
                  max-height: 120px;
                  resize: none;
                  overflow-y: auto;
                  border: 1px solid #ccc;
                  border-radius: 20px;
                  padding: 10px 48px 10px 15px;
                  font-size: 14px;
                  line-height: 1.4;
                  outline: none;
                  transition: all 0.2s ease;
                  font-family: inherit;
                  background-color: #fafafa;
                  scrollbar-width: thin;
                  scrollbar-color: #d1d5db transparent;

                  &:focus {
                     border-color: #152183;
                     box-shadow: 0 0 0 3px rgba(21, 33, 131, 0.1);
                     background-color: #fff;
                  }

                  &::placeholder {
                     color: #999;
                  }

                  /* Smooth scrollbar for WebKit browsers */
                  &::-webkit-scrollbar {
                     width: 6px;
                  }

                  &::-webkit-scrollbar-thumb {
                     background-color: #d1d5db;
                     border-radius: 3px;
                  }
               }

               button {
                  position: absolute;
                  right: 8px;
                  bottom: 8px;
                  background: #152183;
                  color: #fff;
                  border: none;
                  border-radius: 50%;
                  width: 36px;
                  height: 36px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  transition: all 0.2s ease;

                  svg {
                     transition: transform 0.2s;
                  }

                  &:hover {
                     background: #1e2aa8;

                     svg {
                        transform: translateY(-2px);
                     }
                  }

                  &:disabled {
                     opacity: 0.6;
                     cursor: not-allowed;
                  }
               }
            }
         }
      }

      .history-panel {
         position: absolute;
         // top: -95px;
         top: 0;
         left: 0;
         /* start off-screen */
         width: 300px;
         height: 100%;
         background-color: #fff;
         border-right: 1px solid #ddd;
         box-shadow: 4px 0 12px rgba(0, 0, 0, 0.15);
         border-radius: 0 16px 16px 0;
         display: flex;
         flex-direction: column;
         transition: transform 0.4s ease-in-out, opacity 0.3s ease;
         transform: translateX(-100%);
         opacity: 0;
         z-index: 1050;

         &.open {
            transform: translateX(0);
            /* slide in */
            opacity: 1;
         }

         .history-header {
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ddd;

            p {
               margin: 0;
               font-weight: 600;
            }

            button {
               background: transparent;
               border: none;
               font-size: 18px;
            }
         }

         .history-body {
            padding: 16px;
            flex: 1;
            overflow-y: auto;

            ul {
               list-style: none;
               margin: 0;
               padding: 0;

               li {
                  padding: 10px;
                  margin-bottom: 8px;
                  border-radius: 8px;
                  cursor: pointer;
                  transition: background 0.2s;
                  display: flex;
                  justify-content: space-between;

                  &:hover {
                     background-color: #f0f0f0;
                  }

                  .trash-button {
                     background: none;
                     border: none;
                  }
               }
            }
         }
      }
   }
}